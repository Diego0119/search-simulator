\doxysection{pagerank.\+c}
\hypertarget{pagerank_8c_source}{}\label{pagerank_8c_source}\index{src/pagerank.c@{src/pagerank.c}}
\mbox{\hyperlink{pagerank_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{graph_8h}{graph.h}}"{}}\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00016}\mbox{\hyperlink{pagerank_8c_a35ac521ad54b3a1c7ad419c660032e49}{00016}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{pagerank_8c_a35ac521ad54b3a1c7ad419c660032e49}{initialize\_pagerank}}(\textcolor{keywordtype}{double}\ *pagerank,\ \textcolor{keywordtype}{int}\ num\_docs)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00025}00025\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00026}00026\ \ \ \ \ \ \ \ \ pagerank[i]\ =\ 1.0\ /\ num\_docs;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00027}00027\ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00034}\mbox{\hyperlink{pagerank_8c_a69638ecc6b203a7ac9d58df0632173f6}{00034}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{pagerank_8c_a69638ecc6b203a7ac9d58df0632173f6}{calculate\_pagerank}}(\mbox{\hyperlink{structGraph}{Graph}}\ *graph,\ \textcolor{keywordtype}{double}\ *pagerank)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00035}00035\ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00044}00044\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_docs\ =\ graph-\/>total\_docs;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00045}00045\ \ \ \ \ \mbox{\hyperlink{pagerank_8c_a35ac521ad54b3a1c7ad419c660032e49}{initialize\_pagerank}}(pagerank,\ num\_docs);}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00046}00046\ \ \ \ \ \textcolor{keywordtype}{double}\ temp\_rank[MAX\_DOCS];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00072}00072\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ iteration\ =\ 0;\ iteration\ <\ MAX\_ITERATIONS;\ iteration++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00073}00073\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ temp\_rank[i]\ =\ (1\ -\/\ DAMPING\_FACTOR)\ /\ num\_docs;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_links\ =\ \mbox{\hyperlink{graph_8c_a2b8fa4f52b842a9942d8916e73b4a073}{count\_output\_links}}(graph,\ i);}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_links\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ rank\_contribution\ =\ pagerank[i]\ *\ DAMPING\_FACTOR\ /\ num\_links;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structNode}{Node}}\ *current\ =\ graph-\/>output\_adjacent\_list[i];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (current\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ temp\_rank[current-\/>doc\_id]\ +=\ rank\_contribution;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current\ =\ current-\/>next;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00092}00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ error\ =\ 0;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ error\ +=\ fabs(pagerank[i]\ -\/\ temp\_rank[i]);}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ pagerank[i]\ =\ temp\_rank[i];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00114}00114\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ \mbox{\hyperlink{graph_8h_ad23fe8fbadffc551314567f32e18af98}{CONVERGENCE\_THRESHOLD}})}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00118}00118\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00119}00119\ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00126}\mbox{\hyperlink{pagerank_8c_af774e2c127d30c57b1033c2874f056c3}{00126}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{pagerank_8c_af774e2c127d30c57b1033c2874f056c3}{display\_pagerank}}(\mbox{\hyperlink{structGraph}{Graph}}\ *graph,\ \textcolor{keywordtype}{double}\ *pagerank)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00127}00127\ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00155}00155\ \ \ \ \ fprintf(stdout,\ \textcolor{stringliteral}{"{}\(\backslash\)nValores\ de\ PageRank\ ordenados\ por\ importancia:\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00157}00157\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_docs\ =\ graph-\/>total\_docs;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00158}00158\ \ \ \ \ \textcolor{keywordtype}{int}\ indices[num\_docs];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00160}00160\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ indices[i]\ =\ i;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00163}00163\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs\ -\/\ 1;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00164}00164\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ i\ +\ 1;\ j\ <\ num\_docs;\ j++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pagerank[indices[i]]\ <\ pagerank[indices[j]])}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ temp\ =\ indices[i];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices[i]\ =\ indices[j];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices[j]\ =\ temp;}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00173}00173\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00174}00174\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00175}00175\ }
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00176}00176\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_docs;\ i++)}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00177}00177\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00178}00178\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ doc\_id\ =\ indices[i];}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00179}00179\ \ \ \ \ \ \ \ \ fprintf(stdout,\ \textcolor{stringliteral}{"{}Documento\ (\%s):\ PageRank\ =\ \%.6f\(\backslash\)n"{}},\ graph-\/>mapping\_docs[doc\_id].name,\ pagerank[doc\_id]);}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00180}00180\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{pagerank_8c_source_l00181}00181\ \}}

\end{DoxyCode}
